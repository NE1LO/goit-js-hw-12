{"version":3,"file":"commonHelpers.js","sources":["../src/js/render.js","../src/main.js"],"sourcesContent":["const listRender = document.querySelector('.photo-list');\n\nconst render = arr => {\n  let renderHtml;\n  renderHtml = arr.reduce(\n    (HTML, item) =>\n      HTML +\n      `<li class=\"photo-list__item\">\n        <a href=\"${item.largeImageURL}\">\n          <img\n            width=\"360\"\n            height=\"200\"\n            src=\"${item.largeImageURL}\"\n            alt=\"${item.tags}\"\n          />\n        </a>\n        <div class=\"photo-list__block\">\n          <div class=\"photo-list__block__info\">\n            <p><b>Likes</b></p>\n            <p>${item.likes}</p>\n          </div>\n          <div class=\"photo-list__block__info\">\n            <p><b>Views</b></p>\n            <p>${item.views}</p>\n          </div>\n          <div class=\"photo-list__block__info\">\n            <p><b>Comments</b></p>\n            <p>${item.comments}</p>\n          </div>\n          <div class=\"photo-list__block__info\">\n            <p><b>Download</b></p>\n            <p>${item.downloads}</p>\n          </div>\n        </div>\n      </li>`,\n    ''\n  );\n\n  listRender.insertAdjacentHTML('beforeend', renderHtml);\n};\n\nexport { render };\n","import axios from 'axios';\n// ================================імпорт рендер функції\nimport { render } from './js/render';\n// ================================імпорт бібліотеки стилів\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// ================================пошук елементів на сторінці\nconst listRender = document.querySelector('.photo-list');\nconst formEl = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst btnMoreEl = document.querySelector('.btn-more');\nconst gallery = new SimpleLightbox('.photo-list a');\n// ==========================================================\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '41690622-1f4c10e5fb0aefa04cb32f231',\n    'Content-Type': 'application/json',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nconst getPhoto = async params => {\n  try {\n    const response = await instance.get('', { params });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst params = {\n  page: 1,\n  per_page: 40,\n  q: '',\n};\n\n// ===========================================================\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n  listRender.innerHTML = '';\n  btnMoreEl.style.display = 'none';\n  params.page = 1;\n  params.q = formEl.search.value.trim();\n\n  if (params.q === '') {\n    iziToast.error({\n      message: 'you need to write the text',\n      position: 'topRight',\n    });\n    return;\n  }\n  loader.style.display = 'flex';\n  const renderPhoto = await getPhoto(params);\n\n  if (renderPhoto.hits.length === 0) {\n    iziToast.error({\n      message: \"Sorry we can't find this photo\",\n      position: 'topRight',\n    });\n    loader.style.display = 'none';\n    btnMoreEl.style.display = 'none';\n    return;\n  }\n  render(renderPhoto.hits);\n  gallery.refresh();\n  loader.style.display = 'none';\n  btnMoreEl.style.display = 'flex';\n\n  if (params.page === Math.ceil(renderPhoto.totalHits / params.per_page)) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n    btnMoreEl.style.display = 'none';\n    loader.style.display = 'none';\n  }\n});\n\nbtnMoreEl.addEventListener('click', async event => {\n  event.preventDefault();\n  params.page++;\n  const renderMorePhoto = await getPhoto(params);\n  console.log(renderMorePhoto);\n  render(renderMorePhoto.hits);\n  window.scrollBy({\n    top:\n      3 *\n      document.querySelector('.photo-list__item').getBoundingClientRect()\n        .height,\n    behavior: 'smooth',\n  });\n  gallery.refresh();\n\n  if (params.page === Math.ceil(renderMorePhoto.totalHits / params.per_page)) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n    btnMoreEl.style.display = 'none';\n\n    return;\n  }\n});\n"],"names":["listRender","render","arr","renderHtml","HTML","item","formEl","loader","btnMoreEl","gallery","SimpleLightbox","instance","axios","getPhoto","params","error","event","iziToast","renderPhoto","renderMorePhoto"],"mappings":"owBAAA,MAAMA,EAAa,SAAS,cAAc,aAAa,EAEjDC,EAASC,GAAO,CACpB,IAAIC,EACJA,EAAaD,EAAI,OACf,CAACE,EAAMC,IACLD,EACA;AAAA,mBACaC,EAAK;AAAA;AAAA;AAAA;AAAA,mBAILA,EAAK;AAAA,mBACLA,EAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMPA,EAAK;AAAA;AAAA;AAAA;AAAA,iBAILA,EAAK;AAAA;AAAA;AAAA;AAAA,iBAILA,EAAK;AAAA;AAAA;AAAA;AAAA,iBAILA,EAAK;AAAA;AAAA;AAAA,aAIlB,EACJ,EAEEL,EAAW,mBAAmB,YAAaG,CAAU,CACvD,EC9BMH,EAAa,SAAS,cAAc,aAAa,EACjDM,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAY,SAAS,cAAc,WAAW,EAC9CC,EAAU,IAAIC,EAAe,eAAe,EAG5CC,EAAWC,EAAM,OAAO,CAC5B,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,eAAgB,mBAChB,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACH,CAAC,EAEKC,EAAW,MAAMC,GAAU,CAC/B,GAAI,CAEF,OADiB,MAAMH,EAAS,IAAI,GAAI,CAAE,OAAAG,CAAM,CAAE,GAClC,IACjB,OAAQC,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEMD,EAAS,CACb,KAAM,EACN,SAAU,GACV,EAAG,EACL,EAIAR,EAAO,iBAAiB,SAAU,MAAMU,GAAS,CAO/C,GANAA,EAAM,eAAc,EACpBhB,EAAW,UAAY,GACvBQ,EAAU,MAAM,QAAU,OAC1BM,EAAO,KAAO,EACdA,EAAO,EAAIR,EAAO,OAAO,MAAM,KAAI,EAE/BQ,EAAO,IAAM,GAAI,CACnBG,EAAS,MAAM,CACb,QAAS,6BACT,SAAU,UAChB,CAAK,EACD,MACD,CACDV,EAAO,MAAM,QAAU,OACvB,MAAMW,EAAc,MAAML,EAASC,CAAM,EAEzC,GAAII,EAAY,KAAK,SAAW,EAAG,CACjCD,EAAS,MAAM,CACb,QAAS,iCACT,SAAU,UAChB,CAAK,EACDV,EAAO,MAAM,QAAU,OACvBC,EAAU,MAAM,QAAU,OAC1B,MACD,CACDP,EAAOiB,EAAY,IAAI,EACvBT,EAAQ,QAAO,EACfF,EAAO,MAAM,QAAU,OACvBC,EAAU,MAAM,QAAU,OAEtBM,EAAO,OAAS,KAAK,KAAKI,EAAY,UAAYJ,EAAO,QAAQ,IACnEG,EAAS,MAAM,CACb,QAAS,6DACT,SAAU,UAChB,CAAK,EACDT,EAAU,MAAM,QAAU,OAC1BD,EAAO,MAAM,QAAU,OAE3B,CAAC,EAEDC,EAAU,iBAAiB,QAAS,MAAMQ,GAAS,CACjDA,EAAM,eAAc,EACpBF,EAAO,OACP,MAAMK,EAAkB,MAAMN,EAASC,CAAM,EAY7C,GAXA,QAAQ,IAAIK,CAAe,EAC3BlB,EAAOkB,EAAgB,IAAI,EAC3B,OAAO,SAAS,CACd,IACE,EACA,SAAS,cAAc,mBAAmB,EAAE,sBAAuB,EAChE,OACL,SAAU,QACd,CAAG,EACDV,EAAQ,QAAO,EAEXK,EAAO,OAAS,KAAK,KAAKK,EAAgB,UAAYL,EAAO,QAAQ,EAAG,CAC1EG,EAAS,MAAM,CACb,QAAS,6DACT,SAAU,UAChB,CAAK,EACDT,EAAU,MAAM,QAAU,OAE1B,MACD,CACH,CAAC"}