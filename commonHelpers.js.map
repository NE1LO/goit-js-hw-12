{"version":3,"file":"commonHelpers.js","sources":["../src/js/render.js","../src/js/create-page-reguest.js","../src/main.js"],"sourcesContent":["const listRender = document.querySelector('.photo-list');\n\nconst render = arr => {\n  let renderHtml;\n  renderHtml = arr.reduce(\n    (HTML, item) =>\n      HTML +\n      `<li class=\"photo-list__item\">\n        <a href=\"${item.largeImageURL}\">\n          <img\n            width=\"360\"\n            height=\"200\"\n            src=\"${item.largeImageURL}\"\n            alt=\"${item.tags}\"\n          />\n        </a>\n        <div class=\"photo-list__block\">\n          <div class=\"photo-list__block__info\">\n            <p><b>Likes</b></p>\n            <p>${item.likes}</p>\n          </div>\n          <div class=\"photo-list__block__info\">\n            <p><b>Views</b></p>\n            <p>${item.views}</p>\n          </div>\n          <div class=\"photo-list__block__info\">\n            <p><b>Comments</b></p>\n            <p>${item.comments}</p>\n          </div>\n          <div class=\"photo-list__block__info\">\n            <p><b>Download</b></p>\n            <p>${item.downloads}</p>\n          </div>\n        </div>\n      </li>`,\n    ''\n  );\n\n  listRender.insertAdjacentHTML('beforeend', renderHtml);\n\n  const lastItem = listRender.lastElementChild;\n};\n\nexport { render };\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nconst btnMoreEl = document.querySelector('.btn-more');\nconst loader = document.querySelector('.loader');\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '41690622-1f4c10e5fb0aefa04cb32f231',\n    'Content-Type': 'application/json',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nconst getPhoto = async ({ page, perPage, q }) => {\n  try {\n    const response = await instance.get('', {\n      params: {\n        page,\n        per_page: perPage,\n        q,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst createPageReguest = q => {\n  let page = 1;\n  const perPage = 40;\n  return async () => {\n    try {\n      const { hits, total } = await getPhoto({ page, perPage, q });\n      // перевірка на останнє фото\n      if (page >= Math.ceil(total / perPage)) {\n        iziToast.error({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n        btnMoreEl.style.display = 'none';\n        loader.style.display = 'none';\n        return;\n      }\n      page++;\n      return hits;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n};\n\nexport { createPageReguest };\n","// ================================імпорт рендер функції\nimport { createPageReguest } from './js/create-page-reguest';\nimport { render } from './js/render';\n// ================================імпорт бібліотеки для відкриття модалки\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// ================================імпорт бібліотеки iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// ================================пошук елементів на сторінці\nconst listRender = document.querySelector('.photo-list');\nconst formEl = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst btnMoreEl = document.querySelector('.btn-more');\nconst gallery = new SimpleLightbox('.photo-list a');\n// ==========================================================\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  listRender.innerHTML = '';\n  const searchTerm = formEl.search.value.trim();\n  if (searchTerm === '') {\n    iziToast.error({\n      message: 'you need to write the text',\n      position: 'topRight',\n    });\n    return;\n  }\n  const fetchPhoto = createPageReguest(searchTerm);\n\n  const sendFetch = async () => {\n    loader.style.display = 'flex';\n    const photoResponse = await fetchPhoto();\n    if (photoResponse.length == 0) {\n      iziToast.error({\n        message: \"Sorry we can't find this photo\",\n        position: 'topRight',\n      });\n      btnMoreEl.style.display = 'none';\n      loader.style.display = 'none';\n      formEl.search.value = '';\n      return;\n    } else {\n      loader.style.display = 'none';\n      render(photoResponse);\n      gallery.refresh();\n      if (btnMoreEl.style.display === 'flex') {\n        const lastItem = listRender.lastElementChild;\n        window.scrollBy({\n          top: 850,\n          behavior: 'smooth',\n        });\n      }\n      btnMoreEl.style.display = 'flex';\n    }\n  };\n\n  await sendFetch();\n\n  btnMoreEl.addEventListener('click', sendFetch);\n});\n"],"names":["listRender","render","arr","renderHtml","HTML","item","btnMoreEl","loader","instance","axios","getPhoto","page","perPage","q","error","createPageReguest","hits","total","iziToast","formEl","gallery","SimpleLightbox","event","searchTerm","fetchPhoto","sendFetch","photoResponse"],"mappings":"owBAAA,MAAMA,EAAa,SAAS,cAAc,aAAa,EAEjDC,EAASC,GAAO,CACpB,IAAIC,EACJA,EAAaD,EAAI,OACf,CAACE,EAAMC,IACLD,EACA;AAAA,mBACaC,EAAK;AAAA;AAAA;AAAA;AAAA,mBAILA,EAAK;AAAA,mBACLA,EAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMPA,EAAK;AAAA;AAAA;AAAA;AAAA,iBAILA,EAAK;AAAA;AAAA;AAAA;AAAA,iBAILA,EAAK;AAAA;AAAA;AAAA;AAAA,iBAILA,EAAK;AAAA;AAAA;AAAA,aAIlB,EACJ,EAEEL,EAAW,mBAAmB,YAAaG,CAAU,EAEpCH,EAAW,gBAC9B,ECvCMM,EAAY,SAAS,cAAc,WAAW,EAC9CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAWC,EAAM,OAAO,CAC5B,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,eAAgB,mBAChB,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACH,CAAC,EAEKC,EAAW,MAAO,CAAE,KAAAC,EAAM,QAAAC,EAAS,EAAAC,CAAC,IAAO,CAC/C,GAAI,CASF,OARiB,MAAML,EAAS,IAAI,GAAI,CACtC,OAAQ,CACN,KAAAG,EACA,SAAUC,EACV,EAAAC,CACD,CACP,CAAK,GAEe,IACjB,OAAQC,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,EAEMC,EAAoBF,GAAK,CAC7B,IAAIF,EAAO,EACX,MAAMC,EAAU,GAChB,MAAO,UAAY,CACjB,GAAI,CACF,KAAM,CAAE,KAAAI,EAAM,MAAAC,CAAK,EAAK,MAAMP,EAAS,CAAE,KAAAC,EAAM,QAAAC,EAAS,EAAAC,CAAC,CAAE,EAE3D,GAAIF,GAAQ,KAAK,KAAKM,EAAQL,CAAO,EAAG,CACtCM,EAAS,MAAM,CACb,QAAS,6DACT,SAAU,UACpB,CAAS,EACDZ,EAAU,MAAM,QAAU,OAC1BC,EAAO,MAAM,QAAU,OACvB,MACD,CACD,OAAAI,IACOK,CACR,OAAQF,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACL,CACA,EC5CMd,EAAa,SAAS,cAAc,aAAa,EACjDmB,EAAS,SAAS,cAAc,OAAO,EACvCZ,EAAS,SAAS,cAAc,SAAS,EACzCD,EAAY,SAAS,cAAc,WAAW,EAC9Cc,EAAU,IAAIC,EAAe,eAAe,EAGlDF,EAAO,iBAAiB,SAAU,MAAMG,GAAS,CAC/CA,EAAM,eAAc,EAEpBtB,EAAW,UAAY,GACvB,MAAMuB,EAAaJ,EAAO,OAAO,MAAM,KAAI,EAC3C,GAAII,IAAe,GAAI,CACrBL,EAAS,MAAM,CACb,QAAS,6BACT,SAAU,UAChB,CAAK,EACD,MACD,CACD,MAAMM,EAAaT,EAAkBQ,CAAU,EAEzCE,EAAY,SAAY,CAC5BlB,EAAO,MAAM,QAAU,OACvB,MAAMmB,EAAgB,MAAMF,IAC5B,GAAIE,EAAc,QAAU,EAAG,CAC7BR,EAAS,MAAM,CACb,QAAS,iCACT,SAAU,UAClB,CAAO,EACDZ,EAAU,MAAM,QAAU,OAC1BC,EAAO,MAAM,QAAU,OACvBY,EAAO,OAAO,MAAQ,GACtB,MACN,MACMZ,EAAO,MAAM,QAAU,OACvBN,EAAOyB,CAAa,EACpBN,EAAQ,QAAO,EACXd,EAAU,MAAM,UAAY,SACbN,EAAW,iBAC5B,OAAO,SAAS,CACd,IAAK,IACL,SAAU,QACpB,CAAS,GAEHM,EAAU,MAAM,QAAU,MAEhC,EAEE,MAAMmB,EAAS,EAEfnB,EAAU,iBAAiB,QAASmB,CAAS,CAC/C,CAAC"}